/**
                       * @license
                       * author: TanglePay
                       * tanglepaysdk-client.js v0.1.4
                       * Released under the Apache-2.0 license.
                       */
import{EventEmitter as e}from"events";import{WindowPostStream as n,JsonRpcEngine as t}from"tanglepaysdk-common";function o(e,n,t,o){return new(t||(t=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((o=o.apply(e,n||[])).next())}))}function a(e,n){var t,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(i=0)),i;)try{if(t=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(e){s=[6,e],o=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var r=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=function(e){(function(){for(var e=navigator.userAgent,n=0,t=r;n<t.length;n++){var o=t[n];if(e.includes(o))return!0}return!1})()?e&&window.open("https://chrome.google.com/webstore/detail/tanglepay-iota-wallet/hbneiaclpaaglopiogfdhgccebncnjmc?hl=en-US","TanglePay-Extension"):window.open("https://tanglepay.com/","TanglePay")},s={},c={},d=1,l=new n,u=t.builder().add((function(e,n){return o(void 0,void 0,void 0,(function(){return a(this,(function(t){return e.id=d++,e.version=101,e.params.cmd="injectToContent##".concat(e.params.cmd),e.params.origin=window.location.origin,e.params.id=e.id,[2,n(e)]}))}))})).add((function(e){return o(void 0,void 0,void 0,(function(){var n,t,o,r,i;return a(this,(function(a){return n=e.params,t=n.cmd,o=n.data,r=n.id,l.write(e.params),"injectToContent##iota_request"==t?(i=o.method,[2,new Promise((function(n,t){var o;c["iota_request_".concat(i,"_").concat(null!==(o=e.id)&&void 0!==o?o:0)]=function(e,o){if(200===o){if("iota_connect"===i){var a=e.address||"";s.curTanglePayAddress=a+"_"+e.nodeId}n({id:r,version:100,data:e})}else t(e)}}))]):[2,{id:e.id,version:100,data:void 0}]}))}))})).build(),v={redirectAppStoreIfNotInstalled:!1,isTanglePay:!1,tanglePayVersion:"",_events:new e,request:function(e){var n=e.method,t=e.params;return e.timeout,o(void 0,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return v.isTanglePay||i(v.redirectAppStoreIfNotInstalled),n=["eth_sign","personal_sign"].includes(n)?"iota_sign":n,[4,u.request({params:{cmd:"iota_request",data:{method:n,params:t}}})];case 1:return[2,e.sent().data]}}))}))},on:function(e,n){var t="iota_event_".concat(e);v._events.on(t,n)},removeListener:function(e,n){v._events.removeListener(e,n)},removeAllListener:function(e){v._events.removeAllListeners(e)}};l.on("data",(function(e){var n=((null==e?void 0:e.cmd)||"").replace("contentToInject##",""),t=null==e?void 0:e.data,o=null==e?void 0:e.code,a=null==e?void 0:e.id;switch(n){case"getTanglePayInfo":v.tanglePayVersion=null==t?void 0:t.version,window.dispatchEvent(new CustomEvent("iota-ready"));break;case"iota_request":var r=c["iota_request_".concat(t.method,"_").concat(null!=a?a:0)];r&&r(t.response,o);break;case"iota_event":var i=t.method,d="iota_event_".concat(t.method),l=t.response;if("accountsChanged"===i){var u=l.address+"_"+l.nodeId;s.curTanglePayAddress!==u&&v._events.emit(d,l),s.curTanglePayAddress=u||""}else v._events.emit(d,l)}}));var f=0,p=function(){var e=window.TanglePayEnv;if(!e&&++f<=10)setTimeout(p,300);else switch(e){case"app":case"chrome":v.isTanglePay=!0,l.isMobile="app"==e,u.request({params:{cmd:"getTanglePayInfo"}});break;default:window.dispatchEvent(new CustomEvent("iota-ready")),i(v.redirectAppStoreIfNotInstalled)}};window.addEventListener("load",p);export{v as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguZXMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuLi8uLi9zcmMvdXRpbC50cyIsIi4uLy4uL3NyYy9zZXJ2aWNlLnRzIiwiLi4vLi4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19lc0RlY29yYXRlKGN0b3IsIGRlc2NyaXB0b3JJbiwgZGVjb3JhdG9ycywgY29udGV4dEluLCBpbml0aWFsaXplcnMsIGV4dHJhSW5pdGlhbGl6ZXJzKSB7XHJcbiAgICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cclxuICAgIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XHJcbiAgICB2YXIgdGFyZ2V0ID0gIWRlc2NyaXB0b3JJbiAmJiBjdG9yID8gY29udGV4dEluW1wic3RhdGljXCJdID8gY3RvciA6IGN0b3IucHJvdG90eXBlIDogbnVsbDtcclxuICAgIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xyXG4gICAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbi5hY2Nlc3MpIGNvbnRleHQuYWNjZXNzW3BdID0gY29udGV4dEluLmFjY2Vzc1twXTtcclxuICAgICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChraW5kID09PSBcImFjY2Vzc29yXCIpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuZ2V0KSkgZGVzY3JpcHRvci5nZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy5wdXNoKF8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnB1c2goXyk7XHJcbiAgICAgICAgICAgIGVsc2UgZGVzY3JpcHRvcltrZXldID0gXztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSwgZGVzY3JpcHRvcik7XHJcbiAgICBkb25lID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XHJcbiAgICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZVZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wcm9wS2V5KHgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcclxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogcHJlZml4ID8gXCJcIi5jb25jYXQocHJlZml4LCBcIiBcIiwgbmFtZSkgOiBuYW1lIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogZmFsc2UgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4oc3RhdGUsIHJlY2VpdmVyKSB7XHJcbiAgICBpZiAocmVjZWl2ZXIgPT09IG51bGwgfHwgKHR5cGVvZiByZWNlaXZlciAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcmVjZWl2ZXIgIT09IFwiZnVuY3Rpb25cIikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgdXNlICdpbicgb3BlcmF0b3Igb24gbm9uLW9iamVjdFwiKTtcclxuICAgIHJldHVybiB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyID09PSBzdGF0ZSA6IHN0YXRlLmhhcyhyZWNlaXZlcik7XHJcbn1cclxuIiwiY29uc3QgbW9iaWxlQWdlbnRzID0gWydBbmRyb2lkJywgJ2lQaG9uZScsICdTeW1iaWFuT1MnLCAnV2luZG93cyBQaG9uZScsICdpUGFkJywgJ2lQb2QnXTtcclxuZXhwb3J0IGNvbnN0IGNoZWNrSXNQYyA9ICgpID0+IHtcclxuICBjb25zdCBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XHJcbiAgZm9yIChjb25zdCBtb2JpbGVBZ2VudCBvZiBtb2JpbGVBZ2VudHMpIHtcclxuICAgIGlmIChhZ2VudC5pbmNsdWRlcyhtb2JpbGVBZ2VudCkpIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcbiIsImltcG9ydCB7IGNoZWNrSXNQYyB9IGZyb20gJy4vdXRpbCc7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHRvSW5zdGFsbCA9IChyZWRpcmVjdEFwcFN0b3JlSWZOb3RJbnN0YWxsZWQ6Ym9vbGVhbikgPT4ge1xyXG4gIGNvbnN0IGlzUGMgPSBjaGVja0lzUGMoKTtcclxuICBpZiAoaXNQYykge1xyXG4gICAgaWYgKHJlZGlyZWN0QXBwU3RvcmVJZk5vdEluc3RhbGxlZCkge1xyXG4gICAgICB3aW5kb3cub3BlbihcclxuICAgICAgICAnaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvdGFuZ2xlcGF5LWlvdGEtd2FsbGV0L2hibmVpYWNscGFhZ2xvcGlvZ2ZkaGdjY2VibmNuam1jP2hsPWVuLVVTJyxcclxuICAgICAgICAnVGFuZ2xlUGF5LUV4dGVuc2lvbicsXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHdpbmRvdy5vcGVuKCdodHRwczovL3RhbmdsZXBheS5jb20vJywgJ1RhbmdsZVBheScpO1xyXG4gICAgLy8gY29uc29sZS5lcnJvcignQnJvd3NlciBub3Qgc3VwcG9ydGVkJylcclxuICB9XHJcbn07XHJcbi8vIHNlbmQgbWVzc2FnZSB0byBjb250ZW50LXNjcmlwdFxyXG5cclxuIiwiXHJcbmltcG9ydCB7IHRvSW5zdGFsbCB9IGZyb20gJy4vc2VydmljZSc7XHJcbmltcG9ydCB7IElvdGFSZXNwb25zZSwgU2VuZFRvU2NyaXB0UGFyYW0sIFdpbmRvd1NoYXJlZENvbnRleHQgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IHtFdmVudENhbGxiYWNrLCBKc29uUnBjRW5naW5lLCBKc29uUnBjSWQsIEpzb25ScGNSZXNwb25zZSwgV2luZG93UG9zdFN0cmVhbX0gZnJvbSAndGFuZ2xlcGF5c2RrLWNvbW1vbic7XHJcblxyXG4vLyBjb250ZXh0IG9iamVjdHNcclxuY29uc3QgY29udGV4dDp7IGN1clRhbmdsZVBheUFkZHJlc3M/OnN0cmluZyB9ID0ge307XHJcbmNvbnN0IGlvdGFSZXF1ZXN0czogUmVjb3JkPHN0cmluZywgRXZlbnRDYWxsYmFjaz4gPSB7fTtcclxubGV0IF9zZXEgPSAxO1xyXG5jb25zdCBfcnBjVmVyc2lvbiA9IDEwMTtcclxuY29uc3QgX3N0cmVhbSA9IG5ldyBXaW5kb3dQb3N0U3RyZWFtKCk7XHJcbmNvbnN0IF9ycGNFbmdpbmUgPSBKc29uUnBjRW5naW5lXHJcbiAgLmJ1aWxkZXI8U2VuZFRvU2NyaXB0UGFyYW0sIHVua25vd24+KClcclxuICAuYWRkKGFzeW5jIChyZXEsIG5leHQpPT57XHJcbiAgICByZXEuaWQgPSBfc2VxKytcclxuICAgIHJlcS52ZXJzaW9uID0gX3JwY1ZlcnNpb25cclxuICAgIHJlcS5wYXJhbXMhLmNtZCA9IGBpbmplY3RUb0NvbnRlbnQjIyR7cmVxLnBhcmFtcyEuY21kfWA7XHJcbiAgICByZXEucGFyYW1zIS5vcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xyXG4gICAgcmVxLnBhcmFtcyEuaWQgPSByZXEuaWRcclxuICAgIHJldHVybiBuZXh0IShyZXEpO1xyXG4gIH0pXHJcbiAgLmFkZChhc3luYyAocmVxKSA9PiB7XHJcblxyXG4gICAgY29uc3QgeyBjbWQsIGRhdGEsIGlkIH0gPSByZXEucGFyYW1zITtcclxuICAgIF9zdHJlYW0ud3JpdGUocmVxLnBhcmFtcyEpO1xyXG4gICAgaWYgKGNtZCA9PSAnaW5qZWN0VG9Db250ZW50IyNpb3RhX3JlcXVlc3QnKSB7IC8vIGNhc2UgcmVxdWVzdFxyXG4gICAgICBjb25zdCB7IG1ldGhvZCB9ID0gZGF0YTtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEpzb25ScGNSZXNwb25zZTx1bmtub3duPj4oKHJlc29sdmUsIHJlamVjdCk9PntcclxuICAgICAgICBpb3RhUmVxdWVzdHNbYGlvdGFfcmVxdWVzdF8ke21ldGhvZH1fJHtyZXEuaWQ/PzB9YF0gPSAgKHJlczogSW90YVJlc3BvbnNlPGFueT4sIGNvZGU6bnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICBpZiAoY29kZSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgIC8vIGNhY2hlIGlvdGEgYWRkcmVzc1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSAnaW90YV9jb25uZWN0Jykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSByZXMuYWRkcmVzcyB8fCAnJztcclxuICAgICAgICAgICAgICBjb250ZXh0LmN1clRhbmdsZVBheUFkZHJlc3MgPSBhZGRyZXNzICsgJ18nICsgcmVzLm5vZGVJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKHsgaWQsIHZlcnNpb246MTAwLCBkYXRhOiByZXMgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWplY3QocmVzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7IGlkOnJlcS5pZCEsIHZlcnNpb246MTAwLCBkYXRhOiB1bmRlZmluZWQgfTtcclxuICAgIH1cclxuICB9KVxyXG4gIC5idWlsZCgpO1xyXG5jb25zdCBJb3RhU0RLID0ge1xyXG4gIHJlZGlyZWN0QXBwU3RvcmVJZk5vdEluc3RhbGxlZDogZmFsc2UsXHJcbiAgaXNUYW5nbGVQYXk6IGZhbHNlLFxyXG4gIHRhbmdsZVBheVZlcnNpb246ICcnLFxyXG4gIF9ldmVudHM6IG5ldyBFdmVudEVtaXR0ZXIoKSxcclxuXHJcbiAgcmVxdWVzdDogYXN5bmMgKHsgbWV0aG9kLCBwYXJhbXMsIHRpbWVvdXQgPSAzMDAwMCB9OnsgbWV0aG9kOiBzdHJpbmcsIHRpbWVvdXQ/OiBudW1iZXIsIHBhcmFtczogdW5rbm93biB9KSA9PiB7XHJcbiAgICBpZiAoIUlvdGFTREsuaXNUYW5nbGVQYXkpIHtcclxuICAgICAgdG9JbnN0YWxsKElvdGFTREsucmVkaXJlY3RBcHBTdG9yZUlmTm90SW5zdGFsbGVkKTtcclxuICAgIH1cclxuICAgIG1ldGhvZCA9ICFbJ2V0aF9zaWduJywgJ3BlcnNvbmFsX3NpZ24nXS5pbmNsdWRlcyhtZXRob2QpID8gbWV0aG9kIDogJ2lvdGFfc2lnbic7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBfcnBjRW5naW5lLnJlcXVlc3QoeyBwYXJhbXM6e1xyXG4gICAgICBjbWQ6ICdpb3RhX3JlcXVlc3QnLFxyXG4gICAgICBkYXRhOiB7IG1ldGhvZCwgcGFyYW1zIH0sXHJcbiAgICB9IH0pO1xyXG4gICAgcmV0dXJuIHJlcy5kYXRhO1xyXG4gIH0sXHJcbiAgb246IChldmVudDogc3RyaW5nLCBjYWxsQmFjayA6IEV2ZW50Q2FsbGJhY2spID0+IHtcclxuICAgIGNvbnN0IGtleSA9IGBpb3RhX2V2ZW50XyR7ZXZlbnR9YDtcclxuICAgIElvdGFTREsuX2V2ZW50cy5vbihrZXksIGNhbGxCYWNrKTtcclxuICB9LFxyXG4gIHJlbW92ZUxpc3RlbmVyKGV2ZW50OiBzdHJpbmcsIGNhbGxCYWNrOiBFdmVudENhbGxiYWNrKSB7XHJcbiAgICBjb25zdCBrZXkgPSBgaW90YV9ldmVudF8ke2V2ZW50fWA7XHJcbiAgICBJb3RhU0RLLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGNhbGxCYWNrKTtcclxuICB9LFxyXG4gIHJlbW92ZUFsbExpc3RlbmVyKGV2ZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGtleSA9IGBpb3RhX2V2ZW50XyR7ZXZlbnR9YDtcclxuICAgIElvdGFTREsuX2V2ZW50cy5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xyXG4gIH0sXHJcbn07XHJcblxyXG5cclxuLy8gZ2V0IG1lc3NhZ2UgZnJvbSBjb250ZW50LXNjcmlwdFxyXG5cclxuX3N0cmVhbS5vbignZGF0YScsIChkYXRhXz86YW55KT0+e1xyXG4gIGNvbnN0IGNtZCA9IChkYXRhXz8uY21kIHx8ICcnKS5yZXBsYWNlKCdjb250ZW50VG9JbmplY3QjIycsICcnKTtcclxuICBjb25zdCBkYXRhID0gZGF0YV8/LmRhdGE7XHJcbiAgY29uc3QgY29kZSA9IGRhdGFfPy5jb2RlO1xyXG4gIGNvbnN0IHJlcUlkID0gZGF0YV8/LmlkO1xyXG4gIHN3aXRjaCAoY21kKSB7XHJcbiAgICBjYXNlICdnZXRUYW5nbGVQYXlJbmZvJzpcclxuICAgICAgSW90YVNESy50YW5nbGVQYXlWZXJzaW9uID0gZGF0YT8udmVyc2lvbjtcclxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdpb3RhLXJlYWR5JykpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2lvdGFfcmVxdWVzdCc6XHJcbiAgICAgIHtcclxuICAgICAgICBjb25zdCBjYWxsQmFjayA9IGlvdGFSZXF1ZXN0c1tgaW90YV9yZXF1ZXN0XyR7ZGF0YS5tZXRob2R9XyR7cmVxSWQ/PzB9YF07XHJcbiAgICAgICAgaWYgKGNhbGxCYWNrKSBjYWxsQmFjayhkYXRhLnJlc3BvbnNlLCBjb2RlKTtcclxuICAgICAgfVxyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2lvdGFfZXZlbnQnOlxyXG4gICAgICB7XHJcbiAgICAgICAgY29uc3QgZXZlbnQgPSBkYXRhLm1ldGhvZDtcclxuICAgICAgICBjb25zdCBrZXkgPSBgaW90YV9ldmVudF8ke2RhdGEubWV0aG9kfWA7XHJcbiAgICAgICAgY29uc3QgcmVzOklvdGFSZXNwb25zZTxhbnk+ID0gZGF0YS5yZXNwb25zZTtcclxuICAgICAgICBpZiAoZXZlbnQgPT09ICdhY2NvdW50c0NoYW5nZWQnKSB7XHJcbiAgICAgICAgICBjb25zdCBhZGRyZXNzID0gcmVzLmFkZHJlc3MgKyAnXycgKyByZXMubm9kZUlkO1xyXG4gICAgICAgICAgaWYgKGNvbnRleHQuY3VyVGFuZ2xlUGF5QWRkcmVzcyAhPT0gYWRkcmVzcykge1xyXG4gICAgICAgICAgICBJb3RhU0RLLl9ldmVudHMuZW1pdChrZXksIHJlcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb250ZXh0LmN1clRhbmdsZVBheUFkZHJlc3MgPSBhZGRyZXNzIHx8ICcnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBJb3RhU0RLLl9ldmVudHMuZW1pdChrZXksIHJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59KTtcclxuXHJcbmxldCBsb2FkTnVtID0gMDtcclxuY29uc3Qgb25Mb2FkID0gKCkgPT4ge1xyXG4gIGNvbnN0IHNoYXJlZENvbnRleHQgPSB3aW5kb3cgYXMgdW5rbm93biBhcyBXaW5kb3dTaGFyZWRDb250ZXh0O1xyXG4gIGNvbnN0IGVudiA9IHNoYXJlZENvbnRleHQuVGFuZ2xlUGF5RW52O1xyXG4gIGlmICghZW52KSB7XHJcbiAgICBsb2FkTnVtKys7XHJcbiAgICBpZiAobG9hZE51bSA8PSAxMCkge1xyXG4gICAgICBzZXRUaW1lb3V0KG9uTG9hZCwgMzAwKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuICBzd2l0Y2ggKGVudikge1xyXG4gICAgY2FzZSAnYXBwJzpcclxuICAgIGNhc2UgJ2Nocm9tZSc6XHJcbiAgICAgIHtcclxuICAgICAgICBJb3RhU0RLLmlzVGFuZ2xlUGF5ID0gdHJ1ZTtcclxuICAgICAgICBfc3RyZWFtLmlzTW9iaWxlID0gZW52ID09ICdhcHAnO1xyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgX3JwY0VuZ2luZS5yZXF1ZXN0KHsgcGFyYW1zOntcclxuICAgICAgICAgIGNtZDogJ2dldFRhbmdsZVBheUluZm8nLFxyXG4gICAgICAgIH0gfSk7XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICB7XHJcbiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdpb3RhLXJlYWR5JykpO1xyXG4gICAgICAgIHRvSW5zdGFsbChJb3RhU0RLLnJlZGlyZWN0QXBwU3RvcmVJZk5vdEluc3RhbGxlZCk7XHJcbiAgICAgIH1cclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59O1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIG9uTG9hZCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBJb3RhU0RLO1xyXG4iXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJQIiwiZ2VuZXJhdG9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJmdWxmaWxsZWQiLCJ2YWx1ZSIsInN0ZXAiLCJuZXh0IiwiZSIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSIsIl9fZ2VuZXJhdG9yIiwiYm9keSIsImYiLCJ5IiwidCIsImciLCJfIiwibGFiZWwiLCJzZW50IiwidHJ5cyIsIm9wcyIsInZlcmIiLCJ0aHJvdyIsInJldHVybiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidGhpcyIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsIm1vYmlsZUFnZW50cyIsInRvSW5zdGFsbCIsInJlZGlyZWN0QXBwU3RvcmVJZk5vdEluc3RhbGxlZCIsImFnZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwibW9iaWxlQWdlbnRzXzEiLCJfaSIsIm1vYmlsZUFnZW50IiwiaW5jbHVkZXMiLCJjaGVja0lzUGMiLCJ3aW5kb3ciLCJvcGVuIiwiY29udGV4dCIsImlvdGFSZXF1ZXN0cyIsIl9zZXEiLCJfc3RyZWFtIiwiV2luZG93UG9zdFN0cmVhbSIsIl9ycGNFbmdpbmUiLCJKc29uUnBjRW5naW5lIiwiYnVpbGRlciIsImFkZCIsInJlcSIsImlkIiwidmVyc2lvbiIsInBhcmFtcyIsImNtZCIsImNvbmNhdCIsIm9yaWdpbiIsImxvY2F0aW9uIiwiX2EiLCJkYXRhIiwid3JpdGUiLCJtZXRob2RfMSIsInJlcyIsImNvZGUiLCJhZGRyZXNzIiwiY3VyVGFuZ2xlUGF5QWRkcmVzcyIsIm5vZGVJZCIsInVuZGVmaW5lZCIsImJ1aWxkIiwiSW90YVNESyIsImlzVGFuZ2xlUGF5IiwidGFuZ2xlUGF5VmVyc2lvbiIsIl9ldmVudHMiLCJFdmVudEVtaXR0ZXIiLCJyZXF1ZXN0IiwibWV0aG9kIiwiX2MiLCJvbiIsImV2ZW50IiwiY2FsbEJhY2siLCJrZXkiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZGF0YV8iLCJyZXBsYWNlIiwicmVxSWQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJyZXNwb25zZSIsImV2ZW50XzEiLCJlbWl0IiwibG9hZE51bSIsIm9uTG9hZCIsImVudiIsIlRhbmdsZVBheUVudiIsInNldFRpbWVvdXQiLCJpc01vYmlsZSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiI7Ozs7OztnSEFrSE8sU0FBU0EsRUFBVUMsRUFBU0MsRUFBWUMsRUFBR0MsR0FFOUMsT0FBTyxJQUFLRCxJQUFNQSxFQUFJRSxXQUFVLFNBQVVDLEVBQVNDLEdBQy9DLFNBQVNDLEVBQVVDLEdBQVMsSUFBTUMsRUFBS04sRUFBVU8sS0FBS0YsR0FBUSxDQUFHLE1BQU9HLEdBQUtMLEVBQU9LLEdBQU8sQ0FDM0YsU0FBU0MsRUFBU0osR0FBUyxJQUFNQyxFQUFLTixFQUFpQixNQUFFSyxHQUFVLENBQUMsTUFBT0csR0FBS0wsRUFBT0ssR0FBTyxDQUM5RixTQUFTRixFQUFLSSxHQUpsQixJQUFlTCxFQUlhSyxFQUFPQyxLQUFPVCxFQUFRUSxFQUFPTCxRQUoxQ0EsRUFJeURLLEVBQU9MLE1BSmhEQSxhQUFpQk4sRUFBSU0sRUFBUSxJQUFJTixHQUFFLFNBQVVHLEdBQVdBLEVBQVFHLEVBQU8sS0FJaEJPLEtBQUtSLEVBQVdLLEVBQVksQ0FDOUdILEdBQU1OLEVBQVlBLEVBQVVhLE1BQU1oQixFQUFTQyxHQUFjLEtBQUtTLE9BQ3RFLEdBQ0EsQ0FFTyxTQUFTTyxFQUFZakIsRUFBU2tCLEdBQ2pDLElBQXNHQyxFQUFHQyxFQUFHQyxFQUFHQyxFQUEzR0MsRUFBSSxDQUFFQyxNQUFPLEVBQUdDLEtBQU0sV0FBYSxHQUFXLEVBQVBKLEVBQUUsR0FBUSxNQUFNQSxFQUFFLEdBQUksT0FBT0EsRUFBRSxFQUFLLEVBQUVLLEtBQU0sR0FBSUMsSUFBSyxJ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
